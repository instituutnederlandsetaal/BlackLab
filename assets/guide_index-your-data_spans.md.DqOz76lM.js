import{_ as i,c as a,o as t,al as n}from"./chunks/framework.B3j7FRen.js";const o=JSON.parse('{"title":"Spans","description":"","frontmatter":{},"headers":[],"relativePath":"guide/index-your-data/spans.md","filePath":"guide/030_index-your-data/030_spans.md","lastUpdated":1749639304000}'),e={name:"guide/index-your-data/spans.md"};function h(l,s,p,k,d,E){return t(),a("div",null,s[0]||(s[0]=[n(`<h1 id="spans" tabindex="-1">Spans <a class="header-anchor" href="#spans" aria-label="Permalink to &quot;Spans&quot;">​</a></h1> <p>A span is a group of (contiguous) words, that you want to index and search as a single unit. Some examples are
sentences or named entities.</p> <p>The <a href="./simple-example.html">simple example</a> is configured to index  <code>&lt;s/&gt;</code> elements in the input document as spans:</p> <div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># What tags occurring between the word tags do we wish to index? (relative to containerPath) </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">inlineTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Sentence tags</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.//s</span></span></code></pre></div><p>This means we will be able to run searches like:</p> <div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&quot;oak&quot; &quot;tree&quot; within &lt;s/&gt;</span></span></code></pre></div><p>(more about using spans in queries <a href="/guide/query-language/token-based.html#spans">here</a>)</p> <p>There&#39;s a few additional parameters you can set for inline tags.</p> <h2 id="excluding-attributes-or-indexing-extra-attributes" tabindex="-1">Excluding attributes or indexing extra attributes <a class="header-anchor" href="#excluding-attributes-or-indexing-extra-attributes" aria-label="Permalink to &quot;Excluding attributes or indexing extra attributes&quot;">​</a></h2> <p>Make sure your <code>.blf.yaml</code> file starts with <code>processor: saxon</code> to ensure modern XPath compatibility.</p> <div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># What tags occurring between the word tags do we wish to index? (relative to containerPath) </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">inlineTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Sentence tags</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.//s</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">attributes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Don&#39;t index unique ids unless you need them; </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # they slow down indexing and searching and increase index size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xml:id&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          exclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # all attributes except this one will be indexed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.//p</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      attributes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Exclude all attributes except...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">exclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Attribute on tag</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;type&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # extra attribute using XPath</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # if e.g. input is &lt;p xml:id=&quot;par-12&quot;&gt;...&lt;/p&gt; , index  number=&quot;12&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;number&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          valuePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;substring-after(@xml:id, &#39;par-&#39;)&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.//ne</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      displayAs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">named-entity</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # what CSS class to use (when using autogenerated XSLT)</span></span></code></pre></div><p>As you can see, <code>attributes</code> with <code>exclude: true</code> can be used to prevent the index size ballooning because of a unique id (although of course you won&#39;t be able to search sentences by their id anymore), and <code>displayAs</code> can be used to give the span a different CSS class in the generated XSLT (see <a href="./miscellaneous.html#automatic-xslt-generation">Automatic XSLT generation</a>).</p> <p><code>attributes</code> can also be used to add attributes to the tag that are not actually on the tag in the input document, by evaluating an XPath expression.</p> <p>You can also apply <code>process</code> steps to attributes.</p> <h2 id="standoff-annotations-for-spans" tabindex="-1">Standoff annotations for spans <a class="header-anchor" href="#standoff-annotations-for-spans" aria-label="Permalink to &quot;Standoff annotations for spans&quot;">​</a></h2> <p>Just like you can use standoffs to index regular token annotations, you can also use them to index spans.</p> <p>This might fit better with how your input files are structured. Another advantage is that it allows you to index
partially overlapping spans, which is not possible with regular (hierarchically nested) inline tags.</p> <p>This is done using <code>spanStartPath</code>, <code>spanEndPath</code> and <code>spanNamePath</code> (instead of <code>tokenRefPath</code> used for token annotations).</p> <p>So to index this XML:</p> <div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">doc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xml:id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;The&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xml:id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;quick&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xml:id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;brown&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xml:id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;fox&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xml:id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;jumps&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xml:id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w6&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;over&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w1&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w4&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;animal&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> speed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fast&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">doc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>You can use this <code>standoffAnnotations</code> configuration:</p> <div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">tokenIdPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@xml:id&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">standoffAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.//span</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  spanStartPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@from&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  spanEndPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@to&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  spanEndIsInclusive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  spanNamePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@type&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  annotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">speed</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      valuePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@speed&quot;</span></span></code></pre></div><p>Note the setting <code>spanEndIsInclusive: true</code> to indicate that the <code>to</code> attribute refers to the last token of the span, not the first token <em>after</em> the span. (<code>true</code> is the default value for this setting, but it is included here for completeness)</p> <p>The above would allow you to search for <code>&lt;animal/&gt; containing &quot;fox&quot;</code> or <code>&lt;animal speed=&quot;fast&quot; /&gt;</code> to find &quot;The quick brown fox&quot;.</p>`,42)]))}const g=i(e,[["render",h]]);export{o as __pageData,g as default};
