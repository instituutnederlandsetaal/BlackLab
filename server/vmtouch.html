<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vmtouch | / BlackLab /</title>
    <meta name="description" content="Documentation for the corpus search engine BlackLab">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.B_auXnRN.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.BYU7h6TL.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.1TKjaYKP.js">
    <link rel="modulepreload" href="/assets/chunks/framework.B3j7FRen.js">
    <link rel="modulepreload" href="/assets/server_vmtouch.md.6ca1tHOU.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--> <!--[--><span tabindex="-1" data-v-0b0ada53></span> <a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--> <!----> <header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--> <!--[--><img class="VPImage logo" src="/img/ivdnt-logo-4regels.svg" alt data-v-8426fc1a><!--]--> <span data-v-1168a8e4>/ BlackLab /</span> <!--[--><!--]--></a></div></div> <div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--> <div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----> <div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span> <span class="DocSearch-Button-Placeholder">Search</span></span> <span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd> <kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div> <nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963>
      Main Navigation
    </span> <!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/server/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Webservice</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/development/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Developers</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://blacklab-frontend.ivdnt.org/" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Frontend</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://ivdnt.org/" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>/INT/</span><!--]--></a><!--]--><!--]--></nav> <!----> <div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span> <span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div> <div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/instituutnederlandsetaal/blacklab/" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div> <div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button> <div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----> <!--[--><!--[--><!----> <div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p> <div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span> <span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div> <div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/instituutnederlandsetaal/blacklab/" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div> <!--[--><!--]--> <button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span> <span class="middle" data-v-e5dd9c1c></span> <span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div> <div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div> <!----></header> <div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span> <span class="menu-text" data-v-a6f0e41e>Menu</span></button> <div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button> <!----></div></div></div> <aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div> <nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6>
        Sidebar Navigation
      </span> <!--[--><!--]--> <!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----> <div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div> <a class="VPLink link link" href="/server/index.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>BlackLab Server</p><!--]--></a> <!----></div> <!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div> <a class="VPLink link link" href="/server/overview.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>How to use</p><!--]--></a> <!----></div> <!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div> <a class="VPLink link link" href="/server/rest-api/index.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>API reference</p><!--]--></a> <!----></div> <!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div> <a class="VPLink link link" href="/server/from-different-languages.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Using from different languages</p><!--]--></a> <!----></div> <!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div> <a class="VPLink link link" href="/server/configuration.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Configuration</p><!--]--></a> <!----></div> <!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div> <a class="VPLink link link" href="/server/howtos.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Tutorials / howtos</p><!--]--></a> <!----></div> <!----></div><!--]--></div></section></div><!--]--> <!--[--><!--]--></nav></aside> <div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--> <div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div> <div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--> <!--[--><!--]--> <nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div> <div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div> <ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav> <!--[--><!--]--> <div class="spacer" data-v-3f215769></div> <!--[--><!--]--> <!----> <!--[--><!--]--> <!--[--><!--]--></div></div></div></div> <div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--> <main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _server_vmtouch" data-v-39a288b8><div><h1 id="vmtouch" tabindex="-1">vmtouch <a class="header-anchor" href="#vmtouch" aria-label="Permalink to &quot;vmtouch&quot;">​</a></h1> <div class="warning custom-block"><p class="custom-block-title">Not recommended</p> <p>These days, we don&#39;t recommend using vmtouch unless you are certain you need it. Operating systems are good at managing disk cache, so leaving it to the OS will likely result in better overall performance.</p></div> <p>At the Dutch Language Institute, we used to use a tool called <a href="http://hoytech.com/vmtouch/" target="_blank" rel="noreferrer">vmtouch</a> written by Doug Hoyte to &#39;lock&#39; our forward indexes in the operating system&#39;s disk cache, keeping them in memory at all times. This speeds up sorting and grouping operations, as well as generating (large amounts of) KWICs (keyword-in-context results).</p> <p>vmtouch is a tool that can &quot;lock&quot; a file in disk cache. It benefits applications that need to perform fast random access to large files (i.e. several gigabytes). Corpus search applications fall into this domain: they need random access to the &quot;forward index&quot; component of the index to do fast sorting and grouping.</p> <p>You should be careful to ensure the machine you&#39;re using has enough RAM to keep the required files in memory permanently, and will still have memory left over for the operating system and applications.</p> <p>Also important is to run vmtouch as the root user; user accounts have a limit to the amount of memory they may lock. Vmtouch will terminate with an out of memory error if it hits that limit. (it may be possible to raise this limit for a user by changing a configuration file - we haven&#39;t experimented with this)</p> <p>The <a href="http://hoytech.com/vmtouch/" target="_blank" rel="noreferrer">official page for vmtouch</a> has the C source code and the online manual. In the past, we have made a slight modification to the source code to allow for larger files to be cached.</p> <h3 id="filesize-limit" tabindex="-1">Filesize limit <a class="header-anchor" href="#filesize-limit" aria-label="Permalink to &quot;Filesize limit&quot;">​</a></h3> <p>The original vmtouch has a built-in 500 MB per file limit (probably as a safety precaution). We needed to raise this limit to allow for our 2GB+ files. Hence this line:</p> <pre><code>size_t o_max_file_size=500*1024*1024;
</code></pre> <p>was changed to:</p> <pre><code>size_t o_max_file_size=6L*1024*1024*1024;
</code></pre> <p>(Please note that if you wish to cache files larger than 6 GB, you will need to change this line again)</p> <h2 id="running-vmtouch" tabindex="-1">Running vmtouch <a class="header-anchor" href="#running-vmtouch" aria-label="Permalink to &quot;Running vmtouch&quot;">​</a></h2> <p>To run vmtouch in daemon mode, so that it will lock files in the disk cache, use the following command line:</p> <pre><code>sudo vmtouch -vtld &lt;list_of_files&gt;
</code></pre> <p>The switches: v=verbose, t=touch (load into disk cache), l=lock (lock in disk cache), d=daemon (keep the program running). For example, we use the following command line to keep all four forward indexes of our BlackLab corpus locked in disk cache (run from within the index directory):</p> <pre><code>sudo vmtouch -vtld fi_contents%word/tokens.dat fi_contents%lemma/tokens.dat fi_contents%pos/tokens.dat fi_contents%punct/tokens.dat
</code></pre> <p>The daemon will start up and will take a while to load all files into disk cache. You can check its progress by only specifying the -v option:</p> <pre><code>sudo vmtouch -v fi_contents%word/tokens.dat fi_contents%lemma/tokens.dat fi_contents%pos/tokens.dat fi_contents%punct/tokens.dat
</code></pre> <h2 id="helper-scripts" tabindex="-1">Helper scripts <a class="header-anchor" href="#helper-scripts" aria-label="Permalink to &quot;Helper scripts&quot;">​</a></h2> <p>We have written a few simple helper scripts for using vmtouch. These scripts are included in the vmtouch/script/ directory of the BlackLab source distribution, but they are reproduced here for convenience.</p> <p>The first shell script activates the vmtouch daemon for a number of corpora under the same base directory. The second shell script checks the cache status for these files. The third is an init script you can place in /etc/init.d (under Debian) to (automatically) start/stop the daemon on a server.</p> <h3 id="activatevmtouch-sh" tabindex="-1">activateVmtouch.sh <a class="header-anchor" href="#activatevmtouch-sh" aria-label="Permalink to &quot;activateVmtouch.sh&quot;">​</a></h3> <div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># This script will read specific large files in BlackLab corpora into the</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># disk cache and lock them there. This improves performance for</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># applications needing random access on those files.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$EUID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -ne</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Please run as root&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DATASETS_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/blacklab/indices</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VMTOUCH_BINARY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/blacklab/bin/vmtouch/vmtouch</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Figure out the list of files to cache</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DATASETS_DIR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FILES_TO_CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DATASET </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DATASETS_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DATASET ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;  </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DATASET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FILES_TO_CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$FILES_TO_CACHE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DATASET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/fi_contents%word/tokens.dat </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DATASET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/fi_contents%lemma/tokens.dat </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DATASET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/fi_contents%pos/tokens.dat </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DATASET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/fi_contents%punct/tokens.dat&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start vmtouch daemon to keep files in disk cache</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$VMTOUCH_BINARY -vtld $FILES_TO_CACHE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">### checkCache.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/sh</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># This script checks to see how much of the set of files to cache</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># is currently in the disk cache. Should eventually reach and stay</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># at 100%.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DATASETS_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/blacklab/indices</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VMTOUCH_BINARY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/blacklab/bin/vmtouch/vmtouch</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Figure out the list of files to cache</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DATASETS_DIR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FILES_TO_CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DATASET </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DATASETS_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DATASET ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FILES_TO_CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$FILES_TO_CACHE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DATASET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/fi_contents%word/tokens.dat </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DATASET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/fi_contents%lemma/tokens.dat </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DATASET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/fi_contents%pos/tokens.dat </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DATASET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/fi_contents%punct/tokens.dat&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check to see how much of the files has been cached</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$VMTOUCH_BINARY -v $FILES_TO_CACHE</span></span></code></pre></div><h3 id="etc-init-d-vmtouch-startupscript" tabindex="-1">/etc/init.d/vmtouch (startupscript) <a class="header-anchor" href="#etc-init-d-vmtouch-startupscript" aria-label="Permalink to &quot;/etc/init.d/vmtouch (startupscript)&quot;">​</a></h3> <div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/sh</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">### BEGIN INIT INFO</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Provides:          vmtouch</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Required-Start:    $remote_fs $syslog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Required-Stop:     $remote_fs $syslog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Default-Start:     2 3 4 5</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Default-Stop:      0 1 6</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Short-Description: Start vmtouch at boot time</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Description:       Keeps certain files locked in the disk cache.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">### END INIT INFO</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># (Adapted from template at https://github.com/fhd/init-script-template/)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Settings: dir to run from, user to run under, command to run</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/blacklab/bin/vmtouch&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;root&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cmd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/blacklab/bin/vmtouch/activateVmtouch.sh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Daemon&#39;s name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">basename</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Log files</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stdout_log</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/var/log/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.log&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stderr_log</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/var/log/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.err&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># If vmtouch is running, return its PID.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get_pid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> grep </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vmtouch -vtld&quot; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $2}&#39; `</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check to see if vmtouch is running.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">is_running</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> grep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vmtouch -vtld&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/dev/null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start, stop, restart or show status of vmtouch, depending on commandline</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">    start</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_running</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Already started&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Starting </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $cmd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$stdout_log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 2&gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$stderr_log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_running</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Unable to start, see </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$stdout_log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$stderr_log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">    stop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_running</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Stopping </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">..&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        kill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `get_pid`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {1..10}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        do</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_running</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;.&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            sleep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        done</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        echo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_running</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Not stopped; may still be shutting down or shutdown may have failed&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Stopped&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Not running&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">    restart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    $0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_running</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Unable to stop, will not attempt to start&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fi</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    $0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">    status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_running</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Running&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Stopped&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ;;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    *)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Usage: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {start|stop|restart|status}&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ;;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">esac</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span></code></pre></div></div></div></main> <footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--> <div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/instituutnederlandsetaal/blacklab/edit/dev/site/docs/server/_vmtouch.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> Edit this page<!--]--></a></div> <div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>Last updated:
    <time datetime="2025-06-11T11:53:48.000Z" data-v-e98dd255></time></p></div></div> <!----></footer> <!--[--><!--]--></div></div></div> <!--[--><!--]--></div></div> <footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Apache license 2.0</p> <p class="copyright" data-v-e315a0ad>Copyright © 2010-present Dutch Language Institute</p></div></footer> <!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"archive_blog.md\":\"BBxoo1Bm\",\"archive_newsletter.md\":\"PxHbDYCC\",\"development_api-redesign_api-redesign.md\":\"BXLVnTGW\",\"development_api-redesign_api.md\":\"DZQRHFjm\",\"development_changelog.md\":\"DeHxVoVL\",\"development_customization_docindexer.md\":\"BK-ybYnX\",\"development_customization_legacy-docindexers.md\":\"B-fJgR_I\",\"development_customization_plugins.md\":\"L47B50VS\",\"development_downloads.md\":\"B0IADjEm\",\"development_index.md\":\"Dy3CIIH5\",\"development_migration-guide.md\":\"BQsgD1Vk\",\"development_query-tool.md\":\"NdOvkSXe\",\"development_solr.md\":\"DJ_RcSaJ\",\"guide_about.md\":\"CE-pZK_X\",\"guide_example-application.md\":\"CWz51vjf\",\"guide_faq.md\":\"OOLBa7xN\",\"guide_future-plans.md\":\"Dpze4EMr\",\"guide_getting-started.md\":\"Ccl03E3D\",\"guide_index-your-data_annotations.md\":\"BgBol3L4\",\"guide_index-your-data_create-an-index.md\":\"CjApxjIq\",\"guide_index-your-data_full-example.md\":\"G6-Wr6Mf\",\"guide_index-your-data_metadata.md\":\"BZpR-1lx\",\"guide_index-your-data_miscellaneous.md\":\"DjlehXzN\",\"guide_index-your-data_non-xml-files.md\":\"BcspfFpt\",\"guide_index-your-data_parallel-corpora.md\":\"CnXK9kSa\",\"guide_index-your-data_processing-values.md\":\"D0DYT7nZ\",\"guide_index-your-data_relations.md\":\"DKlBtSdg\",\"guide_index-your-data_simple-example.md\":\"BpOODATc\",\"guide_index-your-data_spans.md\":\"DqOz76lM\",\"guide_index-your-data_xpath-examples.md\":\"DDS4eLTP\",\"guide_index.md\":\"BB1rYHn9\",\"guide_query-language_index.md\":\"EiaWmc5s\",\"guide_query-language_miscellaneous.md\":\"BQry9VEe\",\"guide_query-language_parallel.md\":\"CDxmphjm\",\"guide_query-language_relations.md\":\"BtrvnIMT\",\"guide_query-language_token-based.md\":\"C8lQ1E-A\",\"guide_tsv-example.md\":\"BQ5tki1m\",\"guide_who-uses-blacklab.md\":\"X3uRqpwl\",\"guide_yaml.md\":\"a8SqJSyj\",\"index.md\":\"C4TKYqmk\",\"server_configuration.md\":\"DbUUu3OX\",\"server_from-different-languages.md\":\"C3wt23hx\",\"server_howtos.md\":\"BMGTG2vF\",\"server_index.md\":\"Bx0cKYWK\",\"server_install-macos.md\":\"By3yIwbv\",\"server_overview.md\":\"BUw4dnFX\",\"server_rest-api_api-versions.md\":\"CQyI2vkp\",\"server_rest-api_cache-clear_post.md\":\"ZzF4eZZr\",\"server_rest-api_cache-info_get.md\":\"CyIgxXtw\",\"server_rest-api_corpus_autocomplete_field_get.md\":\"D-xgI-OC\",\"server_rest-api_corpus_delete.md\":\"cH2kznC0\",\"server_rest-api_corpus_docs_get.md\":\"sWi7VnyN\",\"server_rest-api_corpus_docs_pid_contents_get.md\":\"B0WO4orC\",\"server_rest-api_corpus_docs_pid_get.md\":\"DoFHDeff\",\"server_rest-api_corpus_docs_pid_snippet_get.md\":\"CjzWfJO9\",\"server_rest-api_corpus_docs_post.md\":\"B1wM60iX\",\"server_rest-api_corpus_fields_fieldname_get.md\":\"ClSy-N0l\",\"server_rest-api_corpus_get.md\":\"DiaF9XbD\",\"server_rest-api_corpus_hits_get.md\":\"DZr5YDTj\",\"server_rest-api_corpus_parse-pattern_get.md\":\"CkrZ27H9\",\"server_rest-api_corpus_relations_get.md\":\"C70rcx5v\",\"server_rest-api_corpus_sharing_get.md\":\"CL9L1g8I\",\"server_rest-api_corpus_sharing_post.md\":\"Y5ICCIPe\",\"server_rest-api_corpus_status_get.md\":\"12VWRbhi\",\"server_rest-api_corpus_termfreq_get.md\":\"6Lbvanp8\",\"server_rest-api_errors.md\":\"HmPWrtaq\",\"server_rest-api_get.md\":\"D49w8m2i\",\"server_rest-api_index.md\":\"BuPNfkR4\",\"server_rest-api_input-formats_get.md\":\"9a7zT5jY\",\"server_rest-api_input-formats_name_delete.md\":\"BsSaRdSB\",\"server_rest-api_input-formats_name_get.md\":\"CQTGZ6kJ\",\"server_rest-api_input-formats_name_xslt_get.md\":\"B0P8HRv1\",\"server_rest-api_input-formats_post.md\":\"fmJOgdMP\",\"server_rest-api_post.md\":\"CIrivuzo\",\"server_rest-api_shared-with-me_get.md\":\"CGokNo9V\",\"server_vmtouch.md\":\"6ca1tHOU\",\"structure.md\":\"CqgiObAT\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"/ BlackLab /\",\"description\":\"Documentation for the corpus search engine BlackLab\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/img/ivdnt-logo-4regels.svg\",\"nav\":[{\"text\":\"Guide\",\"link\":\"/guide/\"},{\"text\":\"Webservice\",\"link\":\"/server/\"},{\"text\":\"Developers\",\"link\":\"/development/\"},{\"text\":\"Frontend\",\"link\":\"https://blacklab-frontend.ivdnt.org/\"},{\"text\":\"/INT/\",\"link\":\"https://ivdnt.org/\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/instituutnederlandsetaal/blacklab/\"}],\"search\":{\"provider\":\"local\"},\"editLink\":{\"pattern\":\"https://github.com/instituutnederlandsetaal/blacklab/edit/dev/site/docs/:path\"},\"footer\":{\"message\":\"Apache license 2.0\",\"copyright\":\"Copyright © 2010-present Dutch Language Institute\"},\"lastUpdated\":{},\"docFooter\":{\"next\":false,\"prev\":false},\"outline\":[2,3],\"sidebar\":{\"/guide/\":{\"base\":\"/guide/\",\"items\":[{\"text\":\"Introduction\",\"link\":\"index.md\"},{\"text\":\"Getting Started\",\"link\":\"getting-started\"},{\"text\":\"Index your data\",\"items\":[{\"text\":\"Create an index\",\"link\":\"index-your-data/create-an-index\"},{\"text\":\"A simple configuration file\",\"link\":\"index-your-data/simple-example\"},{\"text\":\"Annotations\",\"link\":\"index-your-data/annotations\"},{\"text\":\"Spans\",\"link\":\"index-your-data/spans\"},{\"text\":\"Metadata\",\"link\":\"index-your-data/metadata\"},{\"text\":\"Processing values\",\"link\":\"index-your-data/processing-values\"},{\"text\":\"Relations\",\"link\":\"index-your-data/relations\"},{\"text\":\"Parallel corpora\",\"link\":\"index-your-data/parallel-corpora\"},{\"text\":\"Non-XML files\",\"link\":\"index-your-data/non-xml-files\"},{\"text\":\"Miscellaneous\",\"link\":\"index-your-data/miscellaneous\"},{\"text\":\"Full configuration example\",\"link\":\"index-your-data/full-example\"}],\"collapsed\":true},{\"text\":\"Query language\",\"items\":[{\"text\":\"BCQL\",\"link\":\"query-language/index\"},{\"text\":\"Token-based querying\",\"link\":\"query-language/token-based\"},{\"text\":\"Relations querying\",\"link\":\"query-language/relations\"},{\"text\":\"Parallel corpus querying\",\"link\":\"query-language/parallel\"},{\"text\":\"Miscellaneous\",\"link\":\"query-language/miscellaneous\"}],\"collapsed\":true},{\"text\":\"FAQ\",\"link\":\"faq\"},{\"text\":\"Future plans\",\"link\":\"future-plans\"},{\"text\":\"Who is using BlackLab?\",\"link\":\"who-uses-blacklab\"},{\"text\":\"About\",\"link\":\"about\"}]},\"/development/\":{\"base\":\"/development/\",\"items\":[{\"text\":\"Development resources\",\"link\":\"index.md\"},{\"text\":\"Downloads\",\"link\":\"downloads\"},{\"text\":\"QueryTool\",\"link\":\"query-tool\"},{\"text\":\"Customization\",\"items\":[{\"text\":\"Custom DocIndexer\",\"link\":\"customization/docindexer\"},{\"text\":\"Plugins for converting/tagging\",\"link\":\"customization/plugins\"},{\"text\":\"Write a DocIndexer (legacy)\",\"link\":\"customization/legacy-docindexers\"}],\"collapsed\":true},{\"text\":\"Solr (EXPERIMENTAL)\",\"link\":\"solr\"},{\"text\":\"Migration guide\",\"link\":\"migration-guide\"},{\"text\":\"Change Log\",\"link\":\"changelog\"},{\"text\":\"Api redesign\",\"items\":[{\"text\":\"Blacklab webservice API evolution\",\"link\":\"api-redesign/api-redesign\"},{\"text\":\"New API examples\",\"link\":\"api-redesign/API\"}],\"collapsed\":true}]},\"/server/\":{\"base\":\"/server/\",\"items\":[{\"text\":\"BlackLab Server\",\"link\":\"index.md\"},{\"text\":\"How to use\",\"link\":\"overview\"},{\"text\":\"API reference\",\"link\":\"rest-api/index.md\"},{\"text\":\"Using from different languages\",\"link\":\"from-different-languages\"},{\"text\":\"Configuration\",\"link\":\"configuration\"},{\"text\":\"Tutorials / howtos\",\"link\":\"howtos\"}]}}},\"locales\":{\"root\":{\"label\":\"English\",\"lang\":\"en-US\"}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>